// Temporary file to hold the apply logic while we refactor